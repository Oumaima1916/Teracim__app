<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.*?>


<StackPane fx:id="rootPane" prefHeight="800.0" prefWidth="1400.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.myapp.controller.MessagesSecretaireController" stylesheets="@../style.css">

    <ImageView fitHeight="${rootPane.height}" fitWidth="${rootPane.width}" pickOnBounds="true" preserveRatio="false">
        <image><Image url="@../images/bg.png" /></image>
    </ImageView>

    <VBox spacing="0" style="-fx-background-color: rgba(0, 130, 172, 0.45);">

        <HBox alignment="CENTER_LEFT" spacing="35" style="-fx-padding: 20 50;">
            <Label fx:id="navAccueil" onMouseClicked="#switchToAccueil" text="Accueil" styleClass="nav-link" style="-fx-text-fill: white; -fx-cursor: hand;"/>
            <Label text="Messages" styleClass="nav-link, active-link" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
            <Label fx:id="navParametres" onMouseClicked="#switchToParametres" text="Paramètres" styleClass="nav-link" style="-fx-text-fill: white; -fx-cursor: hand;"/>
            <Label fx:id="navGestion" onMouseClicked="#switchToGestion" text="Gestion de comptes" styleClass="nav-link" style="-fx-text-fill: white; -fx-cursor: hand;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <HBox alignment="CENTER" spacing="15">
                <VBox alignment="CENTER_RIGHT">
                    <Label text="Sara Bennani" style="-fx-text-fill: white; -fx-font-weight: bold;"/>
                    <Label text="Secrétaire" style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 11;"/>
                </VBox>
                <Region prefHeight="45" prefWidth="45" style="-fx-background-color: white; -fx-background-radius: 50%;"/>
            </HBox>
        </HBox>

        <VBox VBox.vgrow="ALWAYS" styleClass="white-card" style="-fx-background-radius: 30; -fx-background-color: white;">
            <VBox.margin><Insets bottom="30" left="30" right="30" top="10" /></VBox.margin>
            <padding><Insets top="30" bottom="30" left="30" right="30"/></padding>

            <Label text="Messages" style="-fx-font-size: 32; -fx-font-weight: bold; -fx-text-fill: #0082AC;"/>

            <HBox spacing="30" VBox.vgrow="ALWAYS">
                <VBox prefWidth="280" spacing="15" style="-fx-background-color: #f8f9fa; -fx-background-radius: 20; -fx-padding: 25;">
                    <Label text="CONVERSATIONS" style="-fx-text-fill: #95a5a6; -fx-font-size: 11; -fx-font-weight: bold;"/>

                    <Button fx:id="btnChef" onAction="#loadChefChat" text="Chef de Chantier" styleClass="chat-contact-btn" style="-fx-pref-width: 220; -fx-alignment: center-left; -fx-cursor: hand;"/>
                    <Button fx:id="btnDirecteur" onAction="#loadDirecteurChat" text="Directeur" styleClass="chat-contact-btn" style="-fx-pref-width: 220; -fx-alignment: center-left; -fx-cursor: hand;"/>
                    <Button fx:id="btnClient" onAction="#loadClientChat" text="Client" styleClass="chat-contact-btn" style="-fx-pref-width: 220; -fx-alignment: center-left; -fx-cursor: hand;"/>
                </VBox>

                <VBox HBox.hgrow="ALWAYS" spacing="20">
                    <HBox alignment="BOTTOM_LEFT" spacing="10">
                        <Label fx:id="chatUserName" text="Chef de Chantier" style="-fx-font-weight: bold; -fx-font-size: 24; -fx-text-fill: #0082AC;"/>
                        <Label text="En ligne" style="-fx-text-fill: #bdc3c7; -fx-font-size: 14; -fx-padding: 0 0 4 0;"/>
                    </HBox>

                    <ScrollPane fitToWidth="true" style="-fx-background-color: transparent; -fx-border-color: #f1f1f1; -fx-border-radius: 20;" VBox.vgrow="ALWAYS">
                        <VBox fx:id="chatContainer" spacing="15" style="-fx-padding: 20;"/>
                    </ScrollPane>

                    <HBox spacing="15" alignment="CENTER">
                        <TextField fx:id="messageField" promptText="Écrivez votre message..." HBox.hgrow="ALWAYS" style="-fx-background-radius: 25; -fx-padding: 15 25; -fx-border-color: #0082AC; -fx-border-radius: 25;"/>
                        <Button onAction="#handleSendMessage" text="Envoyer" style="-fx-background-color: #0082AC; -fx-text-fill: white; -fx-background-radius: 25; -fx-padding: 12 40; -fx-font-weight: bold; -fx-cursor: hand;"/>
                    </HBox>
                </VBox>
            </HBox>
        </VBox>
    </VBox>
</StackPane>