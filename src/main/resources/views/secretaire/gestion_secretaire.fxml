<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.*?>
<?import javafx.scene.shape.Circle?>

<StackPane fx:id="rootPane" prefHeight="800.0" prefWidth="1400.0"
           xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.myapp.controller.GestionController"
           stylesheets="@../style.css">

    <!-- Background Image -->
    <ImageView fitHeight="${rootPane.height}" fitWidth="${rootPane.width}"
               pickOnBounds="true" preserveRatio="false">
        <image><Image url="@../images/bg.png" /></image>
    </ImageView>

    <!-- Main Container -->
    <VBox spacing="0" style="-fx-background-color: rgba(0, 130, 172, 0.15);">

        <!-- Top Navigation Bar -->
        <HBox alignment="CENTER_LEFT" prefHeight="80.0" spacing="45"
              style="-fx-padding: 0 50; -fx-background-color: rgba(0, 130, 172, 0.3);">

            <Label fx:id="navAccueil" onMouseClicked="#switchToAccueil" text="Accueil"
                   styleClass="nav-item"
                   style="-fx-text-fill: white; -fx-cursor: hand; -fx-font-size: 18px; -fx-opacity: 0.8; -fx-padding: 5px 10px; -fx-background-radius: 5px;"/>

            <Label fx:id="navMessages" onMouseClicked="#switchToMessages" text="Messages"
                   styleClass="nav-item"
                   style="-fx-text-fill: white; -fx-cursor: hand; -fx-font-size: 18px; -fx-opacity: 0.8; -fx-padding: 5px 10px; -fx-background-radius: 5px;"/>

            <Label fx:id="navParametres" onMouseClicked="#switchToParametres" text="ParamÃ¨tres"
                   styleClass="nav-item"
                   style="-fx-text-fill: white; -fx-cursor: hand; -fx-font-size: 18px; -fx-opacity: 0.8; -fx-padding: 5px 10px; -fx-background-radius: 5px;"/>

            <Label text="Gestion de comptes"
                   style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 18px; -fx-padding: 5px 10px; -fx-background-color: rgba(255, 255, 255, 0.15); -fx-background-radius: 5px;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- User Profile -->
            <HBox alignment="CENTER" spacing="15">
                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Label text="Sara Bennani"
                           style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 15px;"/>
                    <Label text="SecrÃ©taire"
                           style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 12px;"/>
                </VBox>
                <StackPane style="-fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.2), 10, 0, 0, 2);">
                    <Circle radius="22" fill="white" />
                    <Label text="SB" style="-fx-text-fill: #0082AC; -fx-font-weight: bold; -fx-font-size: 14px;"/>
                </StackPane>
            </HBox>
        </HBox>

        <VBox VBox.vgrow="ALWAYS"
              styleClass="content-card"
              style="-fx-background-radius: 40px; -fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.1), 20, 0, 0, 5);">
            <VBox.margin>
                <Insets bottom="30" left="30" right="30" top="10" />
            </VBox.margin>
            <padding>
                <Insets top="40" bottom="40" left="60" right="60"/>
            </padding>

            <!-- Header Section -->
            <HBox alignment="CENTER_LEFT" spacing="20" style="-fx-padding: 0 0 30 0;">
                <VBox spacing="5">
                    <Label text="Gestion des Comptes"
                           style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #0082AC;"/>
                    <Label text="Consultez et gÃ©rez les accÃ¨s des utilisateurs au systÃ¨me."
                           style="-fx-font-size: 16px; -fx-text-fill: #7f8c8d;"/>
                </VBox>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnAddUser" text="+ Nouveau compte"
                        styleClass="btn-add-user"
                        style="-fx-background-color: #0082AC; -fx-text-fill: white; -fx-background-radius: 20px; -fx-padding: 12px 30px; -fx-font-weight: bold; -fx-font-size: 15px; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(0, 130, 172, 0.3), 10, 0, 0, 3);"/>
            </HBox>

            <!-- Table View -->
            <TableView fx:id="comptesTable" VBox.vgrow="ALWAYS"
                       styleClass="users-table">

                <columns>
                    <TableColumn fx:id="colNom" prefWidth="300" text="Utilisateur"/>
                    <TableColumn fx:id="colRole" prefWidth="250" text="RÃ´le / Fonction"/>
                    <TableColumn fx:id="colEmail" prefWidth="350" text="Email"/>
                    <TableColumn fx:id="colStatus" prefWidth="150" text="Statut"/>
                    <TableColumn fx:id="colActions" prefWidth="180" text="Actions"/>
                </columns>

                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                </columnResizePolicy>

                <!-- Placeholder when table is empty -->
                <placeholder>
                    <VBox alignment="CENTER" spacing="15" style="-fx-padding: 50px;">
                        <Label text="ðŸ“‹" style="-fx-font-size: 64px;"/>
                        <Label text="Aucun contenu dans la table"
                               style="-fx-font-size: 18px; -fx-text-fill: #7f8c8d; -fx-font-weight: bold;"/>
                        <Label text="Cliquez sur 'Nouveau compte' pour ajouter un utilisateur"
                               style="-fx-font-size: 14px; -fx-text-fill: #95a5a6;"/>
                    </VBox>
                </placeholder>
            </TableView>

        </VBox>
    </VBox>

</StackPane>